<script>
    // AQUI ESTÁ O SEGREDO: Aponte para o link completo do Render
    const URL_DO_SERVIDOR = 'https://bot-alerta-bairro.onrender.com/api/status';

    async function updateStatus() {
      try {
        const response = await fetch(URL_DO_SERVIDOR);
        const data = await response.json();

        const statusElement = document.getElementById('status-text');
        const indicator = document.getElementById('status-indicator');
        const statusCard = document.getElementById('status-card');
        const statusSection = document.getElementById('status-section');

        statusElement.innerText = data.status;

        // Atualiza cores do card e do fundo da seção
        if (data.status.includes("PAZ")) {
          indicator.className = "h-8 w-8 rounded-full bg-green-500 pulse-bigger";
          statusCard.className = "inline-flex items-center gap-4 px-12 py-8 rounded-3xl shadow-lg shadow-pulse bg-green-100 transition-colors duration-500";
          statusSection.className = "py-20 text-center bg-green-50 transition-colors duration-700";
        } else if (data.status.includes("PERIGO") || data.status.includes("ARMADOS")) {
          indicator.className = "h-8 w-8 rounded-full bg-red-500 pulse-bigger";
          statusCard.className = "inline-flex items-center gap-4 px-12 py-8 rounded-3xl shadow-lg shadow-pulse bg-red-100 transition-colors duration-500";
          statusSection.className = "py-20 text-center bg-red-50 transition-colors duration-700";
        } else {
          indicator.className = "h-8 w-8 rounded-full bg-yellow-500 pulse-bigger";
          statusCard.className = "inline-flex items-center gap-4 px-12 py-8 rounded-3xl shadow-lg shadow-pulse bg-yellow-100 transition-colors duration-500";
          statusSection.className = "py-20 text-center bg-yellow-50 transition-colors duration-700";
        }
      } catch (err) {
        console.error("Erro ao buscar status", err);
        document.getElementById('status-text').innerText = "Erro ao conectar";
      }
    }

    setInterval(updateStatus, 30000);
    updateStatus();
  </script>